-- first some tests of basic functionality
--
-- better succeed
--
select writeFile();
        writefile         
--------------------------
 wrote foobar to /tmp/foo
(1 row)

-- make sure the file doesn't exist on the host filesystem
\! ls -l /tmp/foo
-rw-rw-r-- 1 vagrant vagrant 6 Feb 23 20:13 /tmp/foo
select rlog100();
 rlog100 
---------
 2
(1 row)

select pyint(NULL::int2);
 pyint 
-------
      
(1 row)

select pyint(1::int2);
 pyint 
-------
     1
(1 row)

select pyint(1::int4);
 pyint 
-------
     1
(1 row)

select pyint(1::int8);
 pyint 
-------
     1
(1 row)

select pyfloat(1.2::float4);
 pyfloat 
---------
     1.2
(1 row)

select pyfloat(1.2::float8);
 pyfloat 
---------
     1.2
(1 row)

select pybool('f');
 pybool 
--------
 f
(1 row)

select pybool('t');
 pybool 
--------
 t
(1 row)

select pylog100();
 pylog100 
----------
        2
(1 row)

select pylog(10000, 10);
 pylog 
-------
     4
(1 row)

select concat(fname, lname) from users;
  concat   
-----------
 janedoe
 willemdoe
 johndoe
 ricksmith
(4 rows)

select concatall();
       concatall       
-----------------------
 jane,john,rick,willem
(1 row)

select nested_call_three('a');
 nested_call_three 
-------------------
 a
(1 row)

select nested_call_two('a');
      nested_call_two       
----------------------------
 {'nested_call_three': 'a'}
(1 row)

select nested_call_one('a');
                  nested_call_one                  
---------------------------------------------------
 {'nested_call_two': "{'nested_call_three': 'a'}"}
(1 row)

select invalid_function();
ERROR:  exception occured: (plcontainer.c:244)
DETAIL:  'module' object has no attribute 'foobar'
select invalid_syntax();
ERROR:  exception occured: (plcontainer.c:244)
DETAIL:  ('invalid syntax', ('<string>', 7, 1, '\n'))
